<!--suppress HtmlUnknownAnchorTarget -->
<div class="alert alert-warning" ng-show="order.time">
	<a class="close" href="#" ng-click="order.time = 0">&times;</a>
	<h3>Well done!</h3>
	<p>your order will be delivered in {{order.time}} minutes.</p>
	<p>
		<a class="btn btn-default btn-lg" href="#/">Select another pizzas?</a>
	</p>
</div>



<div ng-hide="order.time">

<h1>Your order</h1>

	<table class="table">
			<tr ng-show="order.cart.length">
				<th>name</th>
				<th>price</th>
				<th>count</th>
				<th>total</th>
			
			</tr>
			<tr ng-repeat="item in order.cart">
				<td>{{item.pizza.name}}</td>
				<td>{{item.pizza.price}} €</td>
				<td>{{item.count}}</td>
				<td>{{item.count * item.pizza.price | number:2}} €</td>
			</tr>
			<tr ng-show="order.cart.length && order.discount > 0">
				<th>Discount</th>
				<th></th>
				<th></th>
				<th>{{order.discount}}%</th>
				<th></th>
			</tr>
			<tr ng-show="order.cart.length">
				<th>TOTAL</th>
				<th></th>
				<th></th>
				<th>{{order.total * (100 - order.discount)/100 | number:2}} €</th>
			
			</tr>
		</table>

	<h1>Set your delivery address, {{vm.user.firstName}}</h1>
	<form class="form-horizontal" name="form" novalidate>
		<div class="form-group">
			<label for="firstName" class="col-lg-2 control-label">First Name</label>

			<div class="col-lg-6">
				<input type="text" ng-model="vm.user.firstName" id="firstName" name="firstName"
				       autofocus required class="form-control"
				       placeholder="Set your first name">
			</div>
			<div class="col col-lg-4 validation-info">
			<span ng-show="form.firstName.$error.required" class="text-danger">
				<span class="glyphicon glyphicon-remove-circle"></span>
				required
			</span>
			<span ng-show="!form.name.$error.required" class="text-success">
				<span class="glyphicon glyphicon-ok-circle"></span>
				ok
			</span>
			</div>
		</div>

		<div class="form-group">
			<label for="lastName" class="col-lg-2 control-label">Last Name</label>

			<div class="col-lg-6">
				<input type="text" ng-model="vm.user.lastName" id="lastName" name="lastName"
				       autofocus required class="form-control"
				       placeholder="Set your first name">
			</div>
			<div class="col col-lg-4 validation-info">
			<span ng-show="form.lastName.$error.required" class="text-danger">
				<span class="glyphicon glyphicon-remove-circle"></span>
				required
			</span>
			<span ng-show="!form.name.$error.required" class="text-success">
				<span class="glyphicon glyphicon-ok-circle"></span>
				ok
			</span>
			</div>
		</div>

		<div class="form-group">
			<label for="card" class="col-lg-2 control-label">Credit card number</label>

			<div class="col-lg-6">
				<input type="text" ng-model="vm.user.card.number" id="card" name="card"
				       autofocus required class="form-control"
				       placeholder="Set your credit card number">
			</div>
			<div class="col col-lg-4 validation-info">
			<span ng-show="form.card.$error.required" class="text-danger">
				<span class="glyphicon glyphicon-remove-circle"></span>
				required
			</span>
			<span ng-show="!form.card.$error.required" class="text-success">
				<span class="glyphicon glyphicon-ok-circle"></span>
				ok
			</span>
			</div>
		</div>

		<div class="form-group">
			<label for="cvc" class="col-lg-2 control-label">CVC code</label>

			<div class="col-lg-6">
				<input type="text" ng-model="vm.user.card.cvc" id="cvc" name="cvc"
				       autofocus required class="form-control"
				       placeholder="Set your CVC code">
			</div>
			<div class="col col-lg-4 validation-info">
			<span ng-show="form.cvc.$error.required" class="text-danger">
				<span class="glyphicon glyphicon-remove-circle"></span>
				required
			</span>
			<span ng-show="!form.cvc.$error.required" class="text-success">
				<span class="glyphicon glyphicon-ok-circle"></span>
				ok
			</span>
			</div>
		</div>

		<div class="form-group">
			<label for="address" class="col-lg-2 control-label">Delivery address</label>

			<div class="col-lg-6">
				<input type="text" ng-model="vm.user.address" id="address" name="address"
				       required ng-minlength="7" class="form-control"
				       placeholder="street, city">
			</div>
			<div class="col col-lg-4 validation-info">
			<span ng-show="form.address.$error.required" class="text-danger">
				<span class="glyphicon glyphicon-remove-circle"></span>
				required
			</span>
			<span ng-show="form.address.$error.minlength" class="text-warning">
				<span class="glyphicon glyphicon-remove-circle"></span>
				too short
			</span>
			<span ng-show="!form.address.$error.required && !form.address.$error.minlength" class="text-success">
				<span class="glyphicon glyphicon-ok-circle"></span>
				ok
			</span>
			</div>
		</div>

		<div class="form-group">
			<div class="col-lg-offset-2 col-lg-10">
				<button type="submit" class="btn btn-primary btn-lg"
				        ng-disabled="form.$invalid"
				        ng-click="orderPizza()">Purchase your pizzas
				</button>
			</div>
		</div>
	</form>
</div>
